{"version":3,"sources":["serviceWorker.js","layouts/PublicLayout.js","layouts/PublicRoute.js","routes.js","containers/HeaderContainer.js","App.js","reducers/GamesReducer.js","reducers/RouterReducer.js","reducers/AppReducer.js","reducers/UserReducer.js","reducers/ProfileReducer.js","reducers/index.js","store/index.js","index.js","utils/helpers/history.js","utils/helpers/setMetacriticColor.js","utils/helpers/elementInViewport.js","utils/helpers/preventClick.js","utils/helpers/formatImageUrl.js","utils/helpers/platformIcon.js","constants/ActionTypes.js","components/CustomLink.js","components/Header.js","components/Background.js","components/Loading.js","components/Video.js","components/GameItem.js","components/GamesRendered.js","components/HOCs/withInfiniteScroll.js","components/HeaderGenres.js","components/Games.js","components/Game.js","components/FullVideo.js","components/CustomTextField.js","components/HOCs/withLogged.js","components/Login.js","components/Signup.js","components/UserLikesTab.js","components/User.js","components/HOCs/withAuthenticated.js","components/CustomImageInput.js","components/SettingsProfileTab.js","components/SettingsPasswordTab.js","components/UserSettings.js","firebase.js","actions/UserActions.js","actions/RouterActions.js","utils/RouterUtils.js","constants/urlApi.js","constants/GlobalConstants.js","actions/AppActions.js","selectors/CommonSelectors.js"],"names":["Boolean","window","location","hostname","match","PublicLayout","children","className","fallback","loading","PublicRoute","Component","component","Layout","layout","rest","render","props","GamesContainer","lazy","GameContainer","LoginContainer","SignupContainer","UserContainer","UserSettingsContainer","NotFound","routes","path","INDEX_PATH","exact","GAMES_PATH","GAME_PATH","USER_PATH","connect","state","getUser","logOut","changeRoute","Header","paths","app","initRouter","closeFullVideo","windowResize","authen","videoId","windowSize","useEffect","timeout","resize","innerWidth","WINDOW_SIZE","tablet","laptop","desktop","all","onWidthResize","clearTimeout","setTimeout","WINDOW_RESIZE_DEBOUNCE","addEventListener","removeEventListener","renderRoutes","useCallback","result","length","map","route","index","key","history","style","fontSize","HeaderContainer","onClose","initialState","nextUrl","games","collection","type","payload","FETCH_GAMES_REQUEST","FETCH_GAMES_SUCCESS","fetchedData","FETCH_GAME_SCREENSHOTS_SUCCESS","screenshots","collectionKey","keys","options","router","CHANGE_ROUTE","PLAY_FULL_VIDEO","CLOSE_FULL_VIDEO","WINDOW_RESIZE","size","currentUser","loadedAuth","likes","loadingUserProfile","visitedUserProfile","profileReducer","FETCH_VISITED_USER_REQUEST","FETCH_VISITED_USER_SUCCESS","user","combineReducers","GamesReducer","RouterReducer","AppReducer","LOGIN_SUCCESS","CLEAR_USER","UPDATE_USER_USERNAME","displayName","username","FETCH_USER_LIKES_SUCCESS","TOGGLE_LIKE","id","liked","UPDATE_USER_PROFILE_SUCCESS","profile","middlewares","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","createHashHistory","setMetacriticColor","num","color","elementInViewport","el","rect","getBoundingClientRect","windowHeight","innerHeight","documentElement","clientHeight","top","left","preventClick","e","preventDefault","stopPropagation","formatImageUrl","url","clipExists","urlReplaced","LIGHTWEIGHT_IMAGE_URL","VIDEO","NO_VIDEO","replace","IMAGE_URL","platforms","Map","FaWindows","FaPlaystation","FaXbox","FaApple","FaAndroid","FaLinux","platformIcon","slug","get","CustomLink","active","onClick","textDecoration","to","compileRoute","defaultProps","React","memo","photoURL","handleLogOut","a","placeholder","onKeyPress","which","keyCode","value","target","query","push","display","alignItems","backgroundImage","toUpperCase","title","cursor","Fragment","marginRight","Background","hasVideo","useState","loaded","setLoaded","bgRef","useRef","handleScroll","current","bgUrl","ref","Loading","propTypes","src","PropTypes","string","playFullVideo","func","isRequired","Video","setLoading","videoRef","volume","onLoadedData","play","loop","bind","propType","GameItem","game","toggleLike","isAuthenticated","loadingToggleLike","setLoadingToggleLike","hover","setHover","name","metacritic","clip","parentPlatforms","showVideo","onMouseEnter","onMouseLeave","video","platform","Icon","setCol","GameRendered","gamesRendered","setGameRendered","colRendered","setColRendered","col","items","i","gridTemplateColumns","set","withInfiniteScroll","InnerComponent","debounce","InfiniteScroll","fetchGamesNext","gamesNextUrl","scrollY","body","offsetHeight","HeaderGenres","genres","genre","expanded","setExpanded","handleClick","prev","transition","transform","g","label","Games","fetchGamesIfNeeded","gamesUrl","margin","GamesRendered","marginTop","dayjs","extend","localizedFormat","relativeTime","Game","fetchGameIfNeeded","collapsed","setCollapsed","released","website","descriptionRaw","alternativeNames","tags","largeBackground","LARGE_IMAGE_URL","mediumBackground","MEDIUM_IMAGE_URL","showCollapsed","collapsedDescription","substring","releasedDate","format","fromNow","zIndex","alert","join","href","ss","alt","image","tag","FullVideo","width","height","frameBorder","allowFullScreen","allow","CustomTextField","useField","field","meta","errorText","touched","border","fontWeight","marginBottom","withLogged","redirectTo","Logged","initialValues","email","password","failed","validationSchema","yup","required","login","handleSubmit","data","actions","setSubmitting","setFieldError","log","onSubmit","isSubmitting","errors","passwordConfirmation","min","max","when","is","val","oneOf","signUp","split","msg","code","UserLikesTab","uid","fetchUserLikes","setGames","res","gameArr","Object","filter","reduce","arr","fetchGamesUserLike","User","fetchUser","isCurrentUser","currentTab","setCurrentTab","renderTab","useMemo","USER_TABS","tab","withAuthenticated","Authenticated","CustomImageInput","errorMessage","setFieldValue","file","setFile","imageReviewUrl","setImageReviewUrl","fileUpload","hidden","onChange","reader","FileReader","files","onloadend","readAsDataURL","click","marginLeft","photo","test","FILE_SIZE","SUPPORTED_FORMATS","includes","trim","SettingsProfileTab","updateUser","toast","dark","position","POSITION","TOP_RIGHT","undefined","oldPassword","newPassword","confirmNewPassword","SettingsPasswordTab","changePassword","resetForm","UserSettings","SETTINGS_TABS","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","this","EmailAuthProvider","auth","db","firestore","storage","updateUsername","userToggleLike","firebase","signInWithEmailAndPassword","dispatch","fetchSignInMethodsForEmail","emailExisted","doc","createUserWithEmailAndPassword","updateProfile","signOut","onAuthStateChanged","fetchedUser","loginSuccess","callback","merge","finally","storageRef","propsShouldUpdate","child","put","getDownloadURL","collectRef","update","previousUser","delete","credential","reauthenticateWithCredential","updatePassword","hash","slice","pathname","search","parseRoute","pathMatch","regexp","pathToRegexp","find","getPathMatch","regexpResult","exec","obj","parseRouteKeys","pair","keyValuePair","parseRouteOptions","toPath","compile","encode","encodeURIComponent","compileOptions","API_URL","GENRES","getGames","getGenre","getSearch","getSlug","getTag","getUsername","getWindowSize","getLikes","getIsAuthenticated","getUserProfile"],"mappings":"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","file":"static/js/main.b9f472cc.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { Suspense } from 'react';\r\nimport { Loading } from '../components';\r\n\r\nconst PublicLayout = ({ children }) => {\r\n  return (\r\n    <div className=\"main\">\r\n      <Suspense fallback={<Loading loading={true} className=\"u-text-center\" />}>\r\n        {children}\r\n      </Suspense>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { PublicLayout };\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\nconst PublicRoute = ({ component: Component, layout: Layout, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => (\r\n        <Layout>\r\n          <Component {...props} />\r\n        </Layout>\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nexport { PublicRoute };\r\n","import { lazy } from 'react';\r\nimport { PublicLayout } from './layouts';\r\nimport {\r\n  INDEX_PATH,\r\n  GAMES_PATH,\r\n  GAME_PATH,\r\n  USER_PATH\r\n} from './constants/urlApi';\r\n\r\nconst GamesContainer = lazy(() => import('./containers/GamesContainer'));\r\nconst GameContainer = lazy(() => import('./containers/GameContainer'));\r\nconst LoginContainer = lazy(() => import('./containers/LoginContainer'));\r\nconst SignupContainer = lazy(() => import('./containers/SignupContainer'));\r\nconst UserContainer = lazy(() => import('./containers/UserContainer'));\r\nconst UserSettingsContainer = lazy(() =>\r\n  import('./containers/UserSettingsContainer')\r\n);\r\nconst NotFound = lazy(() => import('./containers/NotFound'));\r\nexport const routes = [\r\n  {\r\n    path: INDEX_PATH,\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: GamesContainer\r\n  },\r\n  {\r\n    path: GAMES_PATH,\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: GamesContainer\r\n  },\r\n  {\r\n    path: GAME_PATH,\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: GameContainer\r\n  },\r\n  {\r\n    path: USER_PATH,\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: UserContainer\r\n  },\r\n  {\r\n    path: '/settings',\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: UserSettingsContainer\r\n  },\r\n  {\r\n    path: '/login',\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: LoginContainer\r\n  },\r\n  {\r\n    path: '/signup',\r\n    exact: true,\r\n    layout: PublicLayout,\r\n    component: SignupContainer\r\n  },\r\n  {\r\n    path: '*',\r\n    layout: PublicLayout,\r\n    component: NotFound\r\n  }\r\n];\r\n","import { connect } from 'react-redux';\r\nimport { Header } from '../components';\r\nimport { changeRoute } from '../actions/RouterActions';\r\nimport { logOut } from '../actions/UserActions';\r\nimport { getUser } from '../selectors/CommonSelectors';\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    ...getUser(state),\r\n    logOut\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { changeRoute })(Header);\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Router, Switch } from 'react-router-dom';\r\nimport { history } from './utils/helpers';\r\nimport { routes } from './routes';\r\nimport { PublicRoute } from './layouts';\r\nimport { initRouter } from './actions/RouterActions';\r\nimport { closeFullVideo, windowResize } from './actions/AppActions';\r\nimport { authen } from './actions/UserActions';\r\nimport HeaderContainer from './containers/HeaderContainer';\r\nimport {\r\n  INDEX_PATH,\r\n  GAMES_PATH,\r\n  GAME_PATH,\r\n  USER_PATH\r\n} from './constants/urlApi';\r\nimport { FullVideo } from './components';\r\nimport {\r\n  WINDOW_SIZE,\r\n  WINDOW_RESIZE_DEBOUNCE\r\n} from './constants/GlobalConstants';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nconst paths = [INDEX_PATH, GAMES_PATH, GAME_PATH, USER_PATH];\r\n\r\nfunction App({\r\n  initRouter,\r\n  closeFullVideo,\r\n  videoId,\r\n  windowResize,\r\n  windowSize,\r\n  authen\r\n}) {\r\n  useEffect(() => {\r\n    initRouter(paths);\r\n    const subscriber = authen();\r\n    return subscriber;\r\n  }, [initRouter, authen]);\r\n\r\n  useEffect(() => {\r\n    let timeout = null;\r\n\r\n    const resize = () => {\r\n      const { innerWidth } = window;\r\n      if (\r\n        innerWidth < WINDOW_SIZE.tablet &&\r\n        windowSize !== WINDOW_SIZE.tablet\r\n      ) {\r\n        windowResize(WINDOW_SIZE.tablet);\r\n      } else if (\r\n        innerWidth >= WINDOW_SIZE.tablet &&\r\n        innerWidth < WINDOW_SIZE.laptop &&\r\n        windowSize !== WINDOW_SIZE.laptop\r\n      ) {\r\n        windowResize(WINDOW_SIZE.laptop);\r\n      } else if (\r\n        innerWidth >= WINDOW_SIZE.laptop &&\r\n        innerWidth < WINDOW_SIZE.desktop &&\r\n        windowSize !== WINDOW_SIZE.desktop\r\n      ) {\r\n        windowResize(WINDOW_SIZE.desktop);\r\n      } else if (\r\n        innerWidth >= WINDOW_SIZE.desktop &&\r\n        windowSize !== WINDOW_SIZE.all\r\n      ) {\r\n        windowResize(WINDOW_SIZE.all);\r\n      }\r\n    };\r\n\r\n    const onWidthResize = () => {\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(resize, WINDOW_RESIZE_DEBOUNCE);\r\n    };\r\n\r\n    onWidthResize();\r\n    window.addEventListener('resize', onWidthResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', onWidthResize);\r\n    };\r\n  }, [windowSize, windowResize]);\r\n\r\n  const renderRoutes = useCallback(routes => {\r\n    let result = null;\r\n    if (routes.length > 0) {\r\n      result = routes.map((route, index) => {\r\n        const { path, exact, layout, component } = route;\r\n\r\n        return (\r\n          <PublicRoute\r\n            key={index}\r\n            path={path}\r\n            exact={exact}\r\n            layout={layout}\r\n            component={component}\r\n          />\r\n        );\r\n      });\r\n    }\r\n    return <Switch>{result}</Switch>;\r\n  }, []);\r\n\r\n  return (\r\n    <Router history={history}>\r\n      <ToastContainer style={{ fontSize: '1.6rem' }} />\r\n      <div className=\"App\">\r\n        <HeaderContainer />\r\n        {renderRoutes(routes)}\r\n        <FullVideo onClose={closeFullVideo} videoId={videoId} />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    ...state.app\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  initRouter,\r\n  closeFullVideo,\r\n  windowResize,\r\n  authen\r\n})(App);\r\n","import {\r\n  FETCH_GAMES_REQUEST,\r\n  FETCH_GAMES_SUCCESS,\r\n  FETCH_GAME_SCREENSHOTS_SUCCESS\r\n} from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  nextUrl: null,\r\n  games: []\r\n};\r\n\r\nfunction collection(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case FETCH_GAMES_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading: true\r\n      };\r\n    case FETCH_GAMES_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        nextUrl: payload.nextUrl,\r\n        games: [...state.games, ...payload.fetchedData]\r\n      };\r\n    case FETCH_GAME_SCREENSHOTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        screenshots: [...payload.screenshots]\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction games(state = {}, { type, payload }) {\r\n  switch (type) {\r\n    case FETCH_GAMES_REQUEST:\r\n    case FETCH_GAMES_SUCCESS:\r\n    case FETCH_GAME_SCREENSHOTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        [payload.collectionKey]: collection(state[payload.collectionKey], {\r\n          type,\r\n          payload\r\n        })\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default games;\r\n","import { CHANGE_ROUTE } from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n  route: {\r\n    keys: {},\r\n    options: {},\r\n    path: ''\r\n  }\r\n};\r\n\r\nfunction router(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case CHANGE_ROUTE:\r\n      return {\r\n        ...state,\r\n        route: payload.route\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default router;\r\n","import {\r\n  PLAY_FULL_VIDEO,\r\n  CLOSE_FULL_VIDEO,\r\n  WINDOW_RESIZE\r\n} from '../constants/ActionTypes';\r\nimport { WINDOW_SIZE } from '../constants/GlobalConstants';\r\n\r\nconst initialState = {\r\n  videoId: '',\r\n  windowSize: WINDOW_SIZE.all\r\n};\r\n\r\nfunction app(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case PLAY_FULL_VIDEO:\r\n      return {\r\n        ...state,\r\n        videoId: payload.videoId\r\n      };\r\n    case CLOSE_FULL_VIDEO:\r\n      return {\r\n        ...state,\r\n        videoId: ''\r\n      };\r\n    case WINDOW_RESIZE:\r\n      return {\r\n        ...state,\r\n        windowSize: payload.size\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default app;\r\n","import {\r\n  LOGIN_SUCCESS,\r\n  CLEAR_USER,\r\n  UPDATE_USER_USERNAME,\r\n  FETCH_USER_LIKES_SUCCESS,\r\n  TOGGLE_LIKE,\r\n  UPDATE_USER_PROFILE_SUCCESS\r\n} from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n  currentUser: null,\r\n  loadedAuth: false,\r\n  likes: {}\r\n};\r\n\r\nexport default function user(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        currentUser: payload.user,\r\n        loadedAuth: true\r\n      };\r\n    case CLEAR_USER:\r\n      return {\r\n        ...initialState,\r\n        loadedAuth: true\r\n      };\r\n    case UPDATE_USER_USERNAME:\r\n      return {\r\n        ...state,\r\n        currentUser: { ...state.currentUser, displayName: payload.username }\r\n      };\r\n    case FETCH_USER_LIKES_SUCCESS:\r\n      return {\r\n        ...state,\r\n        likes: { ...payload.likes }\r\n      };\r\n    case TOGGLE_LIKE:\r\n      return {\r\n        ...state,\r\n        likes: { ...state.likes, [payload.id]: payload.liked }\r\n      };\r\n    case UPDATE_USER_PROFILE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        currentUser: { ...state.currentUser, ...payload.props }\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  FETCH_VISITED_USER_SUCCESS,\r\n  FETCH_VISITED_USER_REQUEST\r\n} from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n  loadingUserProfile: true,\r\n  visitedUserProfile: null\r\n};\r\n\r\nfunction profileReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case FETCH_VISITED_USER_REQUEST:\r\n      return {\r\n        ...initialState\r\n      };\r\n    case FETCH_VISITED_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loadingUserProfile: false,\r\n        visitedUserProfile: payload.user\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default profileReducer;\r\n","import { combineReducers } from 'redux';\r\nimport GamesReducer from './GamesReducer';\r\nimport RouterReducer from './RouterReducer';\r\nimport AppReducer from './AppReducer';\r\nimport UserReducer from './UserReducer';\r\nimport profileReducer from './ProfileReducer';\r\n\r\nexport default combineReducers({\r\n  games: GamesReducer,\r\n  router: RouterReducer,\r\n  app: AppReducer,\r\n  user: UserReducer,\r\n  profile: profileReducer\r\n});\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport rootReducer from '../reducers';\r\n\r\nconst middlewares = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(...middlewares))\r\n);\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nimport './index.scss';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n","import { createHashHistory } from 'history';\r\n\r\nexport const history = createHashHistory();\r\n","export function setMetacriticColor(num) {\r\n  if (num < 0) return '';\r\n\r\n  let color = '-metacritic-';\r\n  if (num >= 75) {\r\n    color += 'green';\r\n  } else if (num >= 50) {\r\n    color += 'yellow';\r\n  } else if (num >= 25) {\r\n    color += 'blue';\r\n  } else {\r\n    color += 'red';\r\n  }\r\n\r\n  return color;\r\n}\r\n","export function elementInViewport(el) {\r\n  const rect = el.getBoundingClientRect();\r\n  const windowHeight =\r\n    window.innerHeight || document.documentElement.clientHeight;\r\n  const offsetTop = 150;\r\n\r\n  return (\r\n    rect.top >= 0 && rect.left >= 0 && rect.top <= windowHeight + offsetTop\r\n  );\r\n}\r\n","export function preventClick(e) {\r\n  e.preventDefault();\r\n  e.stopPropagation();\r\n}\r\n","import { IMAGE_URL, LIGHTWEIGHT_IMAGE_URL } from '../../constants/urlApi';\r\n\r\nexport function formatImageUrl(url, clipExists = true) {\r\n  const urlReplaced = clipExists\r\n    ? LIGHTWEIGHT_IMAGE_URL.VIDEO\r\n    : LIGHTWEIGHT_IMAGE_URL.NO_VIDEO;\r\n\r\n  return !!url ? url.replace(IMAGE_URL, urlReplaced) : '';\r\n}\r\n","import {\r\n  FaWindows,\r\n  FaPlaystation,\r\n  FaXbox,\r\n  FaLinux,\r\n  FaApple,\r\n  FaAndroid\r\n} from 'react-icons/fa';\r\n\r\nconst platforms = new Map([\r\n  ['pc', FaWindows],\r\n  ['playstation', FaPlaystation],\r\n  ['xbox', FaXbox],\r\n  ['ios', FaApple],\r\n  ['android', FaAndroid],\r\n  ['linux', FaLinux]\r\n]);\r\n\r\nexport function platformIcon(slug) {\r\n  return platforms.get(slug);\r\n}\r\n","// GAMES\r\nexport const FETCH_GAMES_REQUEST = 'FETCH_GAMES_REQUEST';\r\nexport const FETCH_GAMES_SUCCESS = 'FETCH_GAMES_SUCCESS';\r\n\r\n// ROUTER\r\nexport const CHANGE_ROUTE = 'CHANGE_ROUTE';\r\n\r\n// GAME\r\nexport const FETCH_GAME_SCREENSHOTS_SUCCESS = 'FETCH_GAME_SCREENSHOTS_SUCCESS';\r\n\r\n// APP\r\nexport const PLAY_FULL_VIDEO = 'PLAY_FULL_VIDEO';\r\nexport const CLOSE_FULL_VIDEO = 'CLOSE_FULL_VIDEO';\r\nexport const WINDOW_RESIZE = 'WINDOW_RESIZE';\r\n\r\n// USER\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const CLEAR_USER = 'CLEAR_USER';\r\nexport const UPDATE_USER_USERNAME = 'UPDATE_USER_USERNAME';\r\nexport const FETCH_USER_LIKES_SUCCESS = 'FETCH_USER_LIKES_SUCCESS';\r\nexport const TOGGLE_LIKE = 'TOGGLE_LIKE';\r\n\r\n// USER PROFILE\r\nexport const FETCH_VISITED_USER_REQUEST = 'FETCH_VISITED_USER_REQUEST';\r\nexport const FETCH_VISITED_USER_SUCCESS = 'FETCH_VISITED_USER_SUCCESS';\r\n\r\n// USER SETTINGS\r\nexport const UPDATE_USER_PROFILE_SUCCESS = 'UPDATE_USER_PROFILE_SUCCESS';\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport { preventClick } from '../utils/helpers';\r\nimport { compileRoute } from '../utils/RouterUtils';\r\n\r\nconst propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  className: PropTypes.string,\r\n  active: PropTypes.bool,\r\n  path: PropTypes.string,\r\n  options: PropTypes.object,\r\n  keys: PropTypes.object,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  onClick: PropTypes.func\r\n};\r\n\r\nconst defaultProps = {\r\n  active: false,\r\n  className: '',\r\n  onClick: () => {},\r\n  path: '',\r\n  keys: {},\r\n  options: {}\r\n};\r\n\r\nconst CustomLink = ({\r\n  children,\r\n  className,\r\n  active,\r\n  path,\r\n  options,\r\n  keys,\r\n  changeRoute,\r\n  onClick,\r\n  style,\r\n  ...props\r\n}) => {\r\n  const route = { path, keys, options };\r\n\r\n  const handleClick = () => {\r\n    onClick();\r\n    changeRoute(route);\r\n  };\r\n\r\n  return (\r\n    <Link\r\n      style={{ ...style, textDecoration: 'none' }}\r\n      {...props}\r\n      to={compileRoute(route)}\r\n      onClick={!active ? handleClick : preventClick}\r\n      className={className}\r\n    >\r\n      {children}\r\n    </Link>\r\n  );\r\n};\r\n\r\nCustomLink.propTypes = propTypes;\r\nCustomLink.defaultProps = defaultProps;\r\n\r\nexport default React.memo(CustomLink);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { history } from '../utils/helpers';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport { IoIosLogOut } from 'react-icons/io';\r\nimport { GAMES_PATH, USER_PATH } from '../constants/urlApi';\r\nimport CustomLink from './CustomLink';\r\n\r\nconst propTypes = {\r\n  changeRoute: PropTypes.func.isRequired,\r\n  logOut: PropTypes.func.isRequired,\r\n  currentUser: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst Header = ({ changeRoute, logOut, currentUser }) => {\r\n  const { displayName, photoURL } = currentUser || {};\r\n\r\n  const handleLogOut = async () => {\r\n    await logOut();\r\n  };\r\n\r\n  const handleKeyPress = e => {\r\n    const code = e.which || e.keyCode;\r\n    //press enter\r\n    if (code === 13) {\r\n      const value = e.target.value;\r\n      if (value !== '') {\r\n        changeRoute({ path: 'games', keys: {}, options: { query: value } });\r\n        history.push(`/games?query=${value}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <h1 className=\"header__logo\">\r\n        <CustomLink path={GAMES_PATH} changeRoute={changeRoute}>\r\n          RAWGC\r\n        </CustomLink>\r\n      </h1>\r\n      <div className=\"search-bar\">\r\n        <button className=\"search-bar__button\">\r\n          <FaSearch className=\"search-bar__icon\" />\r\n        </button>\r\n        <input\r\n          type=\"text\"\r\n          className=\"search-bar__input\"\r\n          placeholder=\"Search for name\"\r\n          onKeyPress={handleKeyPress}\r\n        />\r\n      </div>\r\n      {!currentUser ? (\r\n        <React.Fragment>\r\n          <CustomLink\r\n            path={'/login'}\r\n            changeRoute={changeRoute}\r\n            className=\"btn u-uppercase\"\r\n            style={{ marginRight: '1rem' }}\r\n          >\r\n            Login\r\n          </CustomLink>\r\n          <CustomLink\r\n            path={'/signup'}\r\n            changeRoute={changeRoute}\r\n            className=\"btn u-uppercase\"\r\n          >\r\n            Sign up\r\n          </CustomLink>\r\n        </React.Fragment>\r\n      ) : (\r\n        <div className=\"header__user\">\r\n          <div className=\"header__user__info\">\r\n            <CustomLink\r\n              path={USER_PATH}\r\n              keys={{ username: displayName || '#' }}\r\n              changeRoute={changeRoute}\r\n              className=\"btn\"\r\n              style={{ display: 'flex', alignItems: 'center' }}\r\n            >\r\n              <div\r\n                className=\"header__user__avatar\"\r\n                style={{ backgroundImage: `url(${photoURL})` }}\r\n              >\r\n                {!photoURL && displayName ? displayName[0].toUpperCase() : ''}\r\n              </div>\r\n              <span className=\"header__user__username\">{displayName}</span>\r\n            </CustomLink>\r\n          </div>\r\n          <IoIosLogOut\r\n            onClick={handleLogOut}\r\n            title=\"Logout\"\r\n            className=\"icon icon--logout\"\r\n            cursor=\"pointer\"\r\n          />\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nHeader.propTypes = propTypes;\r\nHeader.defaultProps = defaultProps;\r\n\r\nexport default React.memo(Header);\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { elementInViewport, formatImageUrl } from '../utils/helpers';\r\n\r\nconst propTypes = {\r\n  backgroundImage: PropTypes.string,\r\n  hasVideo: PropTypes.bool.isRequired,\r\n  className: PropTypes.string,\r\n  children: PropTypes.node\r\n};\r\n\r\nconst defaultProps = {\r\n  className: '',\r\n  backgroundImage: ''\r\n};\r\n\r\nconst Background = ({ backgroundImage, hasVideo, className, children }) => {\r\n  const [loaded, setLoaded] = useState(false);\r\n  const bgRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (!loaded && bgRef.current && elementInViewport(bgRef.current)) {\r\n        const bgUrl = formatImageUrl(backgroundImage, hasVideo);\r\n        bgRef.current.style.backgroundImage = `url(${bgUrl})`;\r\n        setLoaded(true);\r\n      }\r\n    };\r\n\r\n    handleScroll();\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, [loaded, backgroundImage, hasVideo]);\r\n\r\n  return (\r\n    <div ref={bgRef} className={`background ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nBackground.propTypes = propTypes;\r\nBackground.defaultProps = defaultProps;\r\n\r\nexport default React.memo(Background);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst propTypes = {\r\n  loading: PropTypes.bool.isRequired,\r\n  className: PropTypes.string,\r\n  style: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {\r\n  className: '',\r\n  style: {}\r\n};\r\n\r\nconst Loading = ({ loading, className, style }) => {\r\n  if (!loading) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`loading ${className}`} style={style}>\r\n      <div className=\"lds-spinner\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nLoading.propTypes = propTypes;\r\nLoading.defaultProps = defaultProps;\r\n\r\nexport default React.memo(Loading);\r\n","import React, { useRef, useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loading from './Loading';\r\nimport { FaPlay } from 'react-icons/fa';\r\n\r\nconst propTypes = {\r\n  src: PropTypes.string,\r\n  playFullVideo: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  src: ''\r\n};\r\n\r\nconst Video = ({ src, videoId, playFullVideo }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const videoRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    videoRef.current.volume = 0;\r\n  }, []);\r\n\r\n  const handleLoadedData = () => {\r\n    setLoading(false);\r\n    videoRef.current.play();\r\n  };\r\n\r\n  return (\r\n    <div className=\"video\">\r\n      <Loading loading={loading} className=\"video__loading\" />\r\n      <video\r\n        ref={videoRef}\r\n        onLoadedData={handleLoadedData}\r\n        className={`video__frame ${!loading ? 'video__frame--play' : ''}`}\r\n        src={src}\r\n        loop\r\n      />\r\n      <button\r\n        className=\"video__full-frame\"\r\n        onClick={playFullVideo.bind(this, videoId)}\r\n      >\r\n        <FaPlay className=\"icon\" />\r\n        <span>Full video</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nVideo.propType = propTypes;\r\nVideo.defaultProps = defaultProps;\r\n\r\nexport default React.memo(Video);\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Background from './Background';\r\nimport Video from './Video';\r\nimport CustomLink from './CustomLink';\r\nimport { FaPlay } from 'react-icons/fa';\r\nimport { AiTwotoneLike, AiOutlineLoading } from 'react-icons/ai';\r\nimport { setMetacriticColor, platformIcon } from '../utils/helpers';\r\nimport { GAME_PATH } from '../constants/urlApi';\r\nimport { history } from '../utils/helpers';\r\n\r\nconst propTypes = {\r\n  game: PropTypes.object,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  playFullVideo: PropTypes.func.isRequired,\r\n  toggleLike: PropTypes.func.isRequired,\r\n  liked: PropTypes.bool.isRequired,\r\n  isAuthenticated: PropTypes.bool.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  game: {\r\n    clip: {\r\n      clip: '',\r\n      video: ''\r\n    },\r\n    parentPlatforms: []\r\n  }\r\n};\r\n\r\nconst GameItem = ({\r\n  game,\r\n  changeRoute,\r\n  playFullVideo,\r\n  toggleLike,\r\n  liked,\r\n  isAuthenticated\r\n}) => {\r\n  const [loadingToggleLike, setLoadingToggleLike] = useState(false);\r\n  const [hover, setHover] = useState(false);\r\n\r\n  const {\r\n    id,\r\n    name,\r\n    slug,\r\n    backgroundImage,\r\n    metacritic,\r\n    clip,\r\n    parentPlatforms\r\n  } = game;\r\n  const hasVideo = !!clip && !!clip.clip;\r\n  const showVideo = hasVideo && hover;\r\n\r\n  const handleMouseEnter = e => {\r\n    setHover(true);\r\n  };\r\n\r\n  const handleMouseLeave = e => {\r\n    setHover(false);\r\n  };\r\n\r\n  const handleToggleLike = e => {\r\n    if (isAuthenticated) {\r\n      setLoadingToggleLike(true);\r\n      toggleLike(id, !liked ? game : null, setLoadingToggleLike);\r\n    } else {\r\n      changeRoute({ path: '/login', keys: {}, options: {} });\r\n      history.push('/login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"game-item\"\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <Background backgroundImage={backgroundImage} hasVideo={hasVideo}>\r\n        {hasVideo && <FaPlay className=\"icon icon--play\" />}\r\n      </Background>\r\n      {showVideo && (\r\n        <Video\r\n          src={clip.clip}\r\n          videoId={clip.video}\r\n          playFullVideo={playFullVideo}\r\n        />\r\n      )}\r\n      <div className=\"game-item__info\">\r\n        <div className=\"game-item__info__top\">\r\n          <div className=\"game-item__platforms\">\r\n            {parentPlatforms.map(({ platform }) => {\r\n              const Icon = platformIcon(platform.slug);\r\n              return Icon ? (\r\n                <Icon\r\n                  key={platform.id}\r\n                  style={{ marginRight: '0.6rem' }}\r\n                  className=\"icon\"\r\n                />\r\n              ) : null;\r\n            })}\r\n          </div>\r\n          <span className={`game-item__meta ${setMetacriticColor(metacritic)}`}>\r\n            {!!metacritic ? metacritic : 0}\r\n          </span>\r\n        </div>\r\n        <div className=\"game-item__info__bottom\">\r\n          <CustomLink\r\n            className=\"heading-1 game-item__name\"\r\n            title={name}\r\n            active={false}\r\n            path={GAME_PATH}\r\n            keys={{ slug }}\r\n            changeRoute={changeRoute}\r\n          >\r\n            {name}\r\n          </CustomLink>\r\n          {loadingToggleLike ? (\r\n            <AiOutlineLoading className=\"icon icon--loading\" />\r\n          ) : (\r\n            <AiTwotoneLike\r\n              onClick={handleToggleLike}\r\n              className={`icon icon--like ${liked ? 'icon--liked' : ''}`}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nGameItem.propTypes = propTypes;\r\nGameItem.defaultProps = defaultProps;\r\n\r\nexport default React.memo(GameItem);\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GameItem from './GameItem';\r\nimport { WINDOW_SIZE } from '../constants/GlobalConstants';\r\n\r\nconst propTypes = {\r\n  games: PropTypes.array,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  playFullVideo: PropTypes.func.isRequired,\r\n  windowSize: PropTypes.number.isRequired,\r\n  toggleLike: PropTypes.func.isRequired,\r\n  likes: PropTypes.object,\r\n  isAuthenticated: PropTypes.bool.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  games: []\r\n};\r\n\r\nfunction setCol(windowSize) {\r\n  switch (windowSize) {\r\n    case WINDOW_SIZE.all:\r\n      return 4;\r\n    case WINDOW_SIZE.desktop:\r\n      return 3;\r\n    case WINDOW_SIZE.laptop:\r\n      return 2;\r\n    case WINDOW_SIZE.tablet:\r\n      return 1;\r\n    default:\r\n      return 1;\r\n  }\r\n}\r\n\r\nconst GameRendered = ({\r\n  games,\r\n  changeRoute,\r\n  playFullVideo,\r\n  windowSize,\r\n  toggleLike,\r\n  likes,\r\n  isAuthenticated\r\n}) => {\r\n  const [gamesRendered, setGameRendered] = useState([]);\r\n  const [colRendered, setColRendered] = useState(setCol(windowSize));\r\n\r\n  useEffect(() => {\r\n    let col = 0;\r\n    const items = [];\r\n\r\n    for (let i = 0; i < colRendered; i++) {\r\n      items.push([]);\r\n    }\r\n\r\n    for (let i = 0; i < games.length; i++) {\r\n      items[col].push(games[i]);\r\n      col++;\r\n      if (col === colRendered) {\r\n        col = 0;\r\n      }\r\n    }\r\n    setGameRendered(items);\r\n  }, [games, colRendered]);\r\n\r\n  useEffect(() => {\r\n    setColRendered(setCol(windowSize));\r\n  }, [windowSize]);\r\n\r\n  return (\r\n    <div\r\n      className=\"games-rendered\"\r\n      style={{\r\n        gridTemplateColumns: `repeat(${colRendered}, minmax(30rem, 50rem)`\r\n      }}\r\n    >\r\n      {gamesRendered.map((set, index) => {\r\n        return (\r\n          <div className=\"col\" key={'games-' + index}>\r\n            {set.map(game => {\r\n              return (\r\n                <GameItem\r\n                  key={game.id}\r\n                  game={game}\r\n                  changeRoute={changeRoute}\r\n                  playFullVideo={playFullVideo}\r\n                  toggleLike={toggleLike}\r\n                  liked={!!likes[game.id]}\r\n                  isAuthenticated={isAuthenticated}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nGameRendered.propTypes = propTypes;\r\nGameRendered.defaultProps = defaultProps;\r\n\r\nexport default React.memo(GameRendered);\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst propTypes = {\r\n  loading: PropTypes.bool.isRequired,\r\n  gamesNextUrl: PropTypes.string,\r\n  games: PropTypes.array,\r\n  fetchGamesNext: PropTypes.func.isRequired,\r\n  collectionKey: PropTypes.string\r\n};\r\n\r\nconst defaultProps = {\r\n  className: ''\r\n};\r\n\r\nconst withInfiniteScroll = (InnerComponent, debounce = 0) => {\r\n  const InfiniteScroll = ({\r\n    fetchGamesNext,\r\n    gamesNextUrl,\r\n    collectionKey,\r\n    className,\r\n    ...props\r\n  }) => {\r\n    useEffect(() => {\r\n      const handleScroll = () => {\r\n        if (\r\n          window.innerHeight + window.scrollY >=\r\n          document.body.offsetHeight - 200\r\n        ) {\r\n          setTimeout(\r\n            () => fetchGamesNext(collectionKey, gamesNextUrl),\r\n            debounce\r\n          );\r\n        }\r\n      };\r\n\r\n      window.addEventListener('scroll', handleScroll);\r\n\r\n      return () => {\r\n        window.removeEventListener('scroll', handleScroll);\r\n      };\r\n    }, [fetchGamesNext, collectionKey, gamesNextUrl]);\r\n\r\n    return (\r\n      <div className={className}>\r\n        <InnerComponent collectionKey={collectionKey} {...props} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return InfiniteScroll;\r\n};\r\n\r\nwithInfiniteScroll.propTypes = propTypes;\r\nwithInfiniteScroll.defaultProps = defaultProps;\r\n\r\nexport default withInfiniteScroll;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CustomLink from './CustomLink';\r\nimport { GAMES_PATH } from '../constants/urlApi';\r\nimport { IoMdArrowDropdown } from 'react-icons/io';\r\n\r\nconst propTypes = {\r\n  genres: PropTypes.array,\r\n  genre: PropTypes.string,\r\n  changeRoute: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst HeaderGenres = ({ genres, genre, changeRoute }) => {\r\n  const [expanded, setExpanded] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setExpanded(prev => !prev);\r\n  };\r\n\r\n  return (\r\n    <nav className=\"header-genres\">\r\n      <div className=\"header-genres__expanded\">\r\n        <span className=\"header-genres__current-genre\">{genre || 'Genre'}</span>\r\n        <span className=\"header-genres__expanded-icon\" onClick={handleClick}>\r\n          <IoMdArrowDropdown\r\n            style={{\r\n              transition: '0.2s',\r\n              transform: `rotate(${expanded ? '180deg' : '0deg'})`\r\n            }}\r\n          />\r\n        </span>\r\n      </div>\r\n\r\n      <div\r\n        className={`header-genres__menu ${\r\n          expanded ? 'header-genres__menu--expanded' : ''\r\n        }`}\r\n      >\r\n        {genres.map(g => (\r\n          <CustomLink\r\n            key={g.key}\r\n            className={`link ${g.key === genre ? 'link--active' : ''}`}\r\n            onClick={handleClick}\r\n            path={GAMES_PATH}\r\n            active={g.key === genre}\r\n            options={{ genre: g.key }}\r\n            changeRoute={changeRoute}\r\n            {...g}\r\n          >\r\n            {g.label}\r\n          </CustomLink>\r\n        ))}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nHeaderGenres.propTypes = propTypes;\r\nHeaderGenres.defaultProps = defaultProps;\r\n\r\nexport default React.memo(HeaderGenres);\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GamesRendered from './GamesRendered';\r\nimport Loading from './Loading';\r\nimport withInfiniteScroll from './HOCs/withInfiniteScroll';\r\nimport HeaderGenres from './HeaderGenres';\r\n\r\nconst propTypes = {\r\n  loading: PropTypes.bool.isRequired,\r\n  games: PropTypes.array,\r\n  genres: PropTypes.array,\r\n  genre: PropTypes.string,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  fetchGamesIfNeeded: PropTypes.func.isRequired,\r\n  collectionKey: PropTypes.string,\r\n  gamesUrl: PropTypes.string,\r\n  videoId: PropTypes.string,\r\n  playFullVideo: PropTypes.func.isRequired,\r\n  windowSize: PropTypes.number.isRequired,\r\n  toggleLike: PropTypes.func.isRequired,\r\n  likes: PropTypes.object,\r\n  isAuthenticated: PropTypes.bool.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst Games = ({\r\n  loading,\r\n  games,\r\n  genres,\r\n  genre,\r\n  changeRoute,\r\n  fetchGamesIfNeeded,\r\n  collectionKey,\r\n  gamesUrl,\r\n  playFullVideo,\r\n  windowSize,\r\n  toggleLike,\r\n  likes,\r\n  isAuthenticated\r\n}) => {\r\n  useEffect(() => {\r\n    fetchGamesIfNeeded(collectionKey, gamesUrl);\r\n  }, [fetchGamesIfNeeded, collectionKey, gamesUrl]);\r\n\r\n  return (\r\n    <div style={{ margin: '2rem 0 12rem 0' }}>\r\n      <HeaderGenres genres={genres} genre={genre} changeRoute={changeRoute} />\r\n      <GamesRendered\r\n        games={games}\r\n        changeRoute={changeRoute}\r\n        playFullVideo={playFullVideo}\r\n        windowSize={windowSize}\r\n        toggleLike={toggleLike}\r\n        likes={likes}\r\n        isAuthenticated={isAuthenticated}\r\n      />\r\n      <Loading\r\n        loading={loading}\r\n        style={{ marginTop: '2rem' }}\r\n        className=\"u-text-center\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nGames.propTypes = propTypes;\r\nGames.defaultProps = defaultProps;\r\n\r\nexport default withInfiniteScroll(Games);\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\r\nimport { setMetacriticColor } from '../utils/helpers';\r\nimport {\r\n  IMAGE_URL,\r\n  LARGE_IMAGE_URL,\r\n  MEDIUM_IMAGE_URL,\r\n  GAMES_PATH\r\n} from '../constants/urlApi';\r\nimport Loading from './Loading';\r\nimport { FaPlay } from 'react-icons/fa';\r\nimport CustomLink from './CustomLink';\r\nimport {\r\n  AiTwotoneLike,\r\n  AiOutlinePlusCircle,\r\n  AiOutlineLoading\r\n} from 'react-icons/ai';\r\nimport { history } from '../utils/helpers';\r\n\r\ndayjs.extend(localizedFormat);\r\ndayjs.extend(relativeTime);\r\n\r\nconst propTypes = {\r\n  fetchGameIfNeeded: PropTypes.func.isRequired,\r\n  collectionKey: PropTypes.string,\r\n  slug: PropTypes.string,\r\n  game: PropTypes.object,\r\n  screenshots: PropTypes.array,\r\n  playFullVideo: PropTypes.func.isRequired,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool.isRequired,\r\n  likes: PropTypes.object,\r\n  toggleLike: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  screenshots: []\r\n};\r\n\r\nconst Game = ({\r\n  fetchGameIfNeeded,\r\n  collectionKey,\r\n  slug,\r\n  game,\r\n  screenshots,\r\n  playFullVideo,\r\n  changeRoute,\r\n  isAuthenticated,\r\n  likes,\r\n  toggleLike\r\n}) => {\r\n  const [loadingToggleLike, setLoadingToggleLike] = useState(false);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchGameIfNeeded(slug, collectionKey);\r\n  }, [fetchGameIfNeeded, slug, collectionKey]);\r\n\r\n  if (!game) {\r\n    return <Loading loading={true} className=\"u-text-center\" />;\r\n  }\r\n\r\n  const {\r\n    id,\r\n    backgroundImage,\r\n    name,\r\n    released,\r\n    metacritic,\r\n    genres,\r\n    website,\r\n    descriptionRaw,\r\n    alternativeNames,\r\n    clip,\r\n    tags\r\n  } = game;\r\n\r\n  const largeBackground =\r\n    backgroundImage && backgroundImage.replace(IMAGE_URL, LARGE_IMAGE_URL);\r\n  const mediumBackground =\r\n    backgroundImage && backgroundImage.replace(IMAGE_URL, MEDIUM_IMAGE_URL);\r\n  const showCollapsed = descriptionRaw.length > 220 && collapsed;\r\n  const collapsedDescription = showCollapsed\r\n    ? `${descriptionRaw.substring(0, 220)}...`\r\n    : descriptionRaw;\r\n  const videoId = clip && clip.video;\r\n  const releasedDate = `${dayjs(released).format('ll')} (${dayjs(\r\n    released\r\n  ).fromNow()})`;\r\n  const liked = likes[id];\r\n\r\n  const handleCollapsed = () => {\r\n    setCollapsed(prev => !prev);\r\n  };\r\n\r\n  const handleToggleLike = () => {\r\n    if (isAuthenticated) {\r\n      setLoadingToggleLike(true);\r\n      toggleLike(id, !liked ? game : null, setLoadingToggleLike);\r\n    } else {\r\n      changeRoute({ path: '/login', keys: {}, options: {} });\r\n      history.push('/login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"game\">\r\n      <div className=\"deep\">\r\n        <div\r\n          className=\"game__back-art\"\r\n          style={{\r\n            backgroundImage: `linear-gradient(rgba(15, 15, 15, 0.7),\r\n            rgb(21, 21, 21)), linear-gradient(rgba(21, 21, 21, 0.8),\r\n            rgba(21, 21, 21, 0.5)), url(${largeBackground})`,\r\n            zIndex: '1'\r\n          }}\r\n        ></div>\r\n      </div>\r\n      <div className=\"game__main\">\r\n        <div>\r\n          <div\r\n            className=\"game__art\"\r\n            style={{ backgroundImage: `url(${mediumBackground})` }}\r\n          />\r\n          {videoId && (\r\n            <li\r\n              className=\"game__trailer\"\r\n              onClick={playFullVideo.bind(this, videoId)}\r\n            >\r\n              <FaPlay className=\"icon\" />\r\n              <span>Play trailer</span>\r\n            </li>\r\n          )}\r\n          <ul className=\"game__actions\">\r\n            <li\r\n              onClick={handleToggleLike}\r\n              className={`btn game__action game__action--like ${\r\n                liked ? 'game__action--liked' : ''\r\n              }`}\r\n            >\r\n              {loadingToggleLike ? (\r\n                <AiOutlineLoading\r\n                  className=\"icon icon--loading\"\r\n                  style={{ margin: 0 }}\r\n                />\r\n              ) : (\r\n                <React.Fragment>\r\n                  <AiTwotoneLike className=\"icon\" />\r\n                  <span>Like</span>\r\n                </React.Fragment>\r\n              )}\r\n            </li>\r\n            <li className=\"btn game__action\">\r\n              <AiOutlinePlusCircle className=\"icon\" />\r\n              <span onClick={() => alert('Not supported yet!')}>\r\n                Collection\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"game__content\">\r\n          <h2 className=\"game__name\">{name}</h2>\r\n          <span className=\"game__alternative-names\">\r\n            {alternativeNames.join(', ')}\r\n          </span>\r\n          <h3 className=\"heading-3\">\r\n            Released Date <p className=\"game__released\"> {releasedDate}</p>\r\n          </h3>\r\n          <span className={`game__meta ${setMetacriticColor(metacritic)}`}>\r\n            {metacritic || 0}\r\n          </span>\r\n          <h3 className=\"heading-3\">\r\n            Genres\r\n            <div className=\"game__genres\">\r\n              {genres.map((genre, index) => (\r\n                <React.Fragment key={genre.id}>\r\n                  {index !== 0 && ', '}\r\n                  <CustomLink\r\n                    className=\"game__genre\"\r\n                    active={false}\r\n                    path={GAMES_PATH}\r\n                    options={{ genre: genre.slug }}\r\n                    changeRoute={changeRoute}\r\n                  >\r\n                    {genre.name}\r\n                  </CustomLink>\r\n                </React.Fragment>\r\n              ))}\r\n            </div>\r\n          </h3>\r\n          <h3 className=\"heading-3\">\r\n            Homepage\r\n            <p className=\"game__homepage\">\r\n              <a href={website} target=\"blank\">\r\n                {website}\r\n              </a>\r\n            </p>\r\n          </h3>\r\n          <h3 className=\"heading-3\">\r\n            Description{' '}\r\n            <p className=\"game__description\">\r\n              {collapsedDescription}\r\n              {showCollapsed && (\r\n                <span\r\n                  className=\"heading-3 game__show-more\"\r\n                  onClick={handleCollapsed}\r\n                >\r\n                  read more\r\n                </span>\r\n              )}\r\n            </p>\r\n          </h3>\r\n        </div>\r\n      </div>\r\n      <div className=\"game__sub\">\r\n        <div className=\"left\">\r\n          <div className=\"game__images\">\r\n            {screenshots.map(ss => (\r\n              <img\r\n                className=\"game__image\"\r\n                key={ss.id}\r\n                alt={ss.id}\r\n                src={ss.image.replace(IMAGE_URL, MEDIUM_IMAGE_URL)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"right\">\r\n          <h3 className=\"heading-3\">\r\n            Tags\r\n            <div className=\"game__tags\">\r\n              {tags.map(tag => (\r\n                <CustomLink\r\n                  className=\"game__tag\"\r\n                  key={tag.id}\r\n                  active={false}\r\n                  path={GAMES_PATH}\r\n                  options={{ tag: tag.slug }}\r\n                  changeRoute={changeRoute}\r\n                >\r\n                  {tag.name}\r\n                </CustomLink>\r\n              ))}\r\n            </div>\r\n          </h3>\r\n        </div>\r\n      </div>\r\n      <div className=\"footer\">Power by RAWG</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nGame.propTypes = propTypes;\r\nGame.defaultProps = defaultProps;\r\n\r\nexport default Game;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  videoId: PropTypes.string\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst FullVideo = ({ onClose, videoId }) => {\r\n  if (!videoId) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"full-video\">\r\n      <span className=\"full-video__close\" onClick={onClose}>\r\n        &times;\r\n      </span>\r\n      <div className=\"full-video__frame\">\r\n        <iframe\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          frameBorder=\"0\"\r\n          allowFullScreen\r\n          allow=\"accelerometer; autoplay; encrypted-media; picture-in-picture\"\r\n          title=\"Youtube video player\"\r\n          src={`https://www.youtube.com/embed/${videoId}?autoplay=1`}\r\n        ></iframe>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nFullVideo.propTypes = propTypes;\r\nFullVideo.defaultProps = defaultProps;\r\n\r\nexport default React.memo(FullVideo);\r\n","import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nconst CustomTextField = ({ placeholder, className, style, ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  const errorText = meta.error && meta.touched ? meta.error : '';\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        className={className}\r\n        style={{ border: `${errorText ? '1px solid #f00' : ''}`, ...style }}\r\n        placeholder={placeholder}\r\n        {...field}\r\n        {...props}\r\n      />\r\n      {errorText && (\r\n        <div\r\n          style={{\r\n            color: '#f00',\r\n            fontWeight: '100',\r\n            fontSize: '1.4rem',\r\n            marginTop: '-1.2rem',\r\n            marginBottom: '1.2rem'\r\n          }}\r\n        >\r\n          {errorText}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomTextField;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Loading from '../Loading';\r\n\r\nconst withLogged = (InnerComponent, redirectTo = '/') => {\r\n  const Logged = ({ currentUser, loadedAuth, ...props }) => {\r\n    if (!loadedAuth) {\r\n      return <Loading loading={true} className=\"u-text-center\" />;\r\n    } else if (loadedAuth && currentUser) {\r\n      return <Redirect to={redirectTo} />;\r\n    }\r\n    return (\r\n      <InnerComponent\r\n        currentUser={currentUser}\r\n        loadedAuth={loadedAuth}\r\n        {...props}\r\n      />\r\n    );\r\n  };\r\n\r\n  return Logged;\r\n};\r\n\r\nexport default withLogged;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\nimport * as yup from 'yup';\r\nimport CustomTextField from './CustomTextField';\r\nimport { AiOutlineLoading } from 'react-icons/ai';\r\nimport withLogged from './HOCs/withLogged';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: '',\r\n  failed: ''\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  email: yup.string().required('This field is required'),\r\n  password: yup.string().required('This field is required')\r\n});\r\n\r\nconst Login = ({ login }) => {\r\n  const handleSubmit = async (data, actions) => {\r\n    const { setSubmitting, setFieldError } = actions;\r\n    const { email, password } = data;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      await login(email, password);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setFieldError('failed', 'Unable to log in with provided credentials');\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form\">\r\n      <h2 className=\"heading-1\">LOGIN</h2>\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        {({ isSubmitting, errors }) => (\r\n          <Form className=\"form__form\">\r\n            <CustomTextField\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"form__input\"\r\n              placeholder=\"Email\"\r\n            />\r\n            <CustomTextField\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"form__input\"\r\n              placeholder=\"Password\"\r\n            />\r\n            {errors && errors.failed && (\r\n              <div\r\n                style={{\r\n                  color: '#f00',\r\n                  fontSize: '1.4rem',\r\n                  fontWeight: '100',\r\n                  marginBottom: '1rem'\r\n                }}\r\n              >\r\n                {errors.failed}\r\n              </div>\r\n            )}\r\n            <button\r\n              type={isSubmitting ? 'button' : 'submit'}\r\n              className=\"btn form__submit\"\r\n            >\r\n              {isSubmitting && (\r\n                <AiOutlineLoading className=\"icon icon--loading\" />\r\n              )}\r\n              LOGIN\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n      <Link style={{ color: '#fff' }} to=\"/signup\">\r\n        Don't have an account? Sign up.\r\n      </Link>\r\n      <Link style={{ color: '#fff' }} to=\"/password-recovery\">\r\n        Forgot your password?\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withLogged(Login);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\nimport * as yup from 'yup';\r\nimport CustomTextField from './CustomTextField';\r\nimport { AiOutlineLoading } from 'react-icons/ai';\r\nimport withLogged from './HOCs/withLogged';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  username: '',\r\n  password: '',\r\n  passwordConfirmation: ''\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  email: yup\r\n    .string()\r\n    .required('This field is required')\r\n    .email('This field must be email'),\r\n  username: yup\r\n    .string()\r\n    .required('This field is required')\r\n    .min(6, 'This field min 6 characters')\r\n    .max(15, 'This field max 15 characters'),\r\n  password: yup\r\n    .string()\r\n    .required('This field is required')\r\n    .min(6, 'This field min 6 characters'),\r\n  passwordConfirmation: yup\r\n    .string()\r\n    .required('This field is required')\r\n    .when('password', {\r\n      is: val => (val && val.length > 0 ? true : false),\r\n      then: yup\r\n        .string()\r\n        .oneOf([yup.ref('password')], 'Both password need to be the same')\r\n    })\r\n});\r\n\r\nconst Signup = ({ signUp }) => {\r\n  const handleSubmit = async (data, actions) => {\r\n    const { setSubmitting, setFieldError } = actions;\r\n    const { email, password, username } = data;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const error = await signUp(email, username, password);\r\n      if (error) {\r\n        const [name, msg] = error.split('-');\r\n        setFieldError(name, msg);\r\n      }\r\n    } catch (error) {\r\n      console.error(error.code);\r\n      console.error(error.message);\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form\">\r\n      <h2 className=\"heading-1\">SIGN UP</h2>\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className=\"form__form\">\r\n            <CustomTextField\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"form__input\"\r\n              placeholder=\"Email\"\r\n            />\r\n            <CustomTextField\r\n              type=\"text\"\r\n              name=\"username\"\r\n              className=\"form__input\"\r\n              placeholder=\"Username\"\r\n            />\r\n            <CustomTextField\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"form__input\"\r\n              placeholder=\"Password\"\r\n            />\r\n            <CustomTextField\r\n              type=\"password\"\r\n              name=\"passwordConfirmation\"\r\n              className=\"form__input\"\r\n              placeholder=\"Confirm password\"\r\n            />\r\n            <button\r\n              type={isSubmitting ? 'button' : 'submit'}\r\n              className=\"btn form__submit\"\r\n            >\r\n              {isSubmitting && (\r\n                <AiOutlineLoading className=\"icon icon--loading\" />\r\n              )}\r\n              SIGN UP\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n      <Link style={{ color: '#fff' }} to=\"/login\">\r\n        Already have an account? Login.\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withLogged(Signup);\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GamesRendered from './GamesRendered';\r\nimport Loading from './Loading';\r\n\r\nconst propTypes = {\r\n  uid: PropTypes.string.isRequired,\r\n  fetchUserLikes: PropTypes.func.isRequired,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  playFullVideo: PropTypes.func.isRequired,\r\n  windowSize: PropTypes.number.isRequired,\r\n  toggleLike: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool.isRequired,\r\n  likes: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst UserLikesTab = ({\r\n  uid,\r\n  fetchUserLikes,\r\n  changeRoute,\r\n  playFullVideo,\r\n  windowSize,\r\n  toggleLike,\r\n  isAuthenticated,\r\n  likes\r\n}) => {\r\n  const [games, setGames] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchGamesUserLike = async () => {\r\n      setLoading(true);\r\n      const res = await fetchUserLikes(uid);\r\n      const data = res.data();\r\n      if (data) {\r\n        const gameArr = Object.keys(data)\r\n          .filter(key => !!data[key])\r\n          .reduce((arr, key) => [...arr, data[key]], []);\r\n        setGames(gameArr);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchGamesUserLike();\r\n  }, [uid, fetchUserLikes]);\r\n\r\n  if (loading) {\r\n    return <Loading loading={true} className=\"u-text-center\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-likes\">\r\n      <GamesRendered\r\n        games={games}\r\n        likes={likes}\r\n        changeRoute={changeRoute}\r\n        playFullVideo={playFullVideo}\r\n        windowSize={windowSize}\r\n        toggleLike={toggleLike}\r\n        isAuthenticated={isAuthenticated}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nUserLikesTab.propTypes = propTypes;\r\nUserLikesTab.defaultProps = defaultProps;\r\n\r\nexport default UserLikesTab;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { USER_TABS } from '../constants/GlobalConstants';\r\nimport Loading from './Loading';\r\nimport CustomLink from './CustomLink';\r\nimport UserLikesTab from './UserLikesTab';\r\n\r\nconst propTypes = {\r\n  loadingUserProfile: PropTypes.bool.isRequired,\r\n  visitedUserProfile: PropTypes.object,\r\n  username: PropTypes.string,\r\n  isCurrentUser: PropTypes.bool.isRequired,\r\n  fetchUser: PropTypes.func.isRequired,\r\n  changeRoute: PropTypes.func.isRequired,\r\n  playFullVideo: PropTypes.func.isRequired,\r\n  windowSize: PropTypes.number.isRequired,\r\n  toggleLike: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool.isRequired,\r\n  fetchUserLikes: PropTypes.func.isRequired,\r\n  likes: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst User = ({\r\n  loadingUserProfile,\r\n  visitedUserProfile,\r\n  username,\r\n  fetchUser,\r\n  isCurrentUser,\r\n  changeRoute,\r\n  playFullVideo,\r\n  windowSize,\r\n  toggleLike,\r\n  isAuthenticated,\r\n  fetchUserLikes,\r\n  likes\r\n}) => {\r\n  const [currentTab, setCurrentTab] = useState('');\r\n  const { uid, displayName, photoURL } = visitedUserProfile || {};\r\n\r\n  useEffect(() => {\r\n    setCurrentTab('');\r\n    if (username) {\r\n      fetchUser(username);\r\n    }\r\n  }, [fetchUser, username]);\r\n\r\n  const renderTab = useMemo(() => {\r\n    switch (currentTab) {\r\n      case 'likes':\r\n        return (\r\n          <UserLikesTab\r\n            uid={uid}\r\n            fetchUserLikes={fetchUserLikes}\r\n            changeRoute={changeRoute}\r\n            playFullVideo={playFullVideo}\r\n            windowSize={windowSize}\r\n            toggleLike={toggleLike}\r\n            isAuthenticated={isAuthenticated}\r\n            likes={likes}\r\n          />\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }, [\r\n    currentTab,\r\n    uid,\r\n    fetchUserLikes,\r\n    changeRoute,\r\n    playFullVideo,\r\n    windowSize,\r\n    toggleLike,\r\n    isAuthenticated,\r\n    likes\r\n  ]);\r\n\r\n  const handleChangeTab = tab => () => {\r\n    setCurrentTab(tab);\r\n  };\r\n\r\n  if (loadingUserProfile) {\r\n    return <Loading loading={true} className=\"u-text-center\" />;\r\n  } else if (!loadingUserProfile && !visitedUserProfile) {\r\n    return (\r\n      <div style={{ fontSize: '4rem' }} className=\"u-text-center\">\r\n        User is not found\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"user\">\r\n      <div className=\"user__top\">\r\n        <div className=\"user__info\">\r\n          <span className=\"user__username\">{displayName}</span>\r\n          <div\r\n            className=\"user__photo\"\r\n            style={{ backgroundImage: `url(${photoURL})` }}\r\n          >\r\n            {!photoURL && displayName[0].toUpperCase()}\r\n          </div>\r\n        </div>\r\n        {isCurrentUser && (\r\n          <CustomLink\r\n            path={'/settings'}\r\n            changeRoute={changeRoute}\r\n            className=\"btn u-uppercase user__settings\"\r\n          >\r\n            Settings\r\n          </CustomLink>\r\n        )}\r\n      </div>\r\n      <div className=\"user__middle\">\r\n        <div className=\"user__tabs\">\r\n          {USER_TABS.map(({ key, label }) => (\r\n            <span\r\n              onClick={handleChangeTab(key)}\r\n              className={`user__tab ${\r\n                currentTab === key ? 'user__tab--active' : ''\r\n              }`}\r\n              key={key}\r\n            >\r\n              {label}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"user__bottom\">{renderTab}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nUser.propTypes = propTypes;\r\nUser.defaultProps = defaultProps;\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Loading from '../Loading';\r\n\r\nconst withAuthenticated = (InnerComponent, redirectTo = '/login') => {\r\n  const Authenticated = ({ currentUser, loadedAuth, ...props }) => {\r\n    if (!loadedAuth) {\r\n      return <Loading loading={true} className=\"u-text-center\" />;\r\n    } else if (loadedAuth && !currentUser) {\r\n      return <Redirect to={redirectTo} />;\r\n    }\r\n    return (\r\n      <InnerComponent\r\n        currentUser={currentUser}\r\n        loadedAuth={loadedAuth}\r\n        {...props}\r\n      />\r\n    );\r\n  };\r\n\r\n  return Authenticated;\r\n};\r\n\r\nexport default withAuthenticated;\r\n","import React, { useRef, useState } from 'react';\r\n\r\nconst CustomImageInput = ({ name, errorMessage, setFieldValue, field }) => {\r\n  const [file, setFile] = useState();\r\n  const [imageReviewUrl, setImageReviewUrl] = useState();\r\n  const fileUpload = useRef(null);\r\n\r\n  const handleImageChange = e => {\r\n    e.preventDefault();\r\n    const reader = new FileReader();\r\n    const file = e.target.files[0];\r\n\r\n    if (file) {\r\n      reader.onloadend = () => {\r\n        setFile(file);\r\n        setImageReviewUrl(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      setFieldValue(field.name, file);\r\n    }\r\n  };\r\n\r\n  const showPreviewImage = () => {\r\n    if (file && !errorMessage) {\r\n      return <img src={imageReviewUrl} className=\"form__img\" alt=\"avatar\" />;\r\n    } else {\r\n      return <span className=\"form__img\"></span>;\r\n    }\r\n  };\r\n\r\n  const showFileUpload = () => {\r\n    if (fileUpload) {\r\n      fileUpload.current.click();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{ display: 'flex', alignItems: 'center', margin: '0 0 1rem 0' }}\r\n    >\r\n      <div>{showPreviewImage()}</div>\r\n      <input\r\n        hidden\r\n        id={name}\r\n        name={name}\r\n        type=\"file\"\r\n        onChange={handleImageChange}\r\n        ref={fileUpload}\r\n      />\r\n      <button type=\"button\" onClick={showFileUpload} className=\"form__button\">\r\n        Upload\r\n      </button>\r\n      {errorMessage ? (\r\n        <span\r\n          style={{\r\n            marginLeft: '1rem',\r\n            color: '#f00',\r\n            fontWeight: '100',\r\n            fontSize: '1.4rem'\r\n          }}\r\n        >\r\n          {errorMessage}\r\n        </span>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomImageInput;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Formik, Form, Field } from 'formik';\r\nimport * as yup from 'yup';\r\nimport CustomTextField from './CustomTextField';\r\nimport CustomImageInput from './CustomImageInput';\r\nimport { AiOutlineLoading } from 'react-icons/ai';\r\nimport { FILE_SIZE, SUPPORTED_FORMATS } from '../constants/GlobalConstants';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst propTypes = {\r\n  currentUser: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst initialValues = {\r\n  photo: undefined,\r\n  username: ''\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  photo: yup\r\n    .mixed()\r\n    .test(\r\n      'fileSize',\r\n      'File too large',\r\n      value => !value || value.size <= FILE_SIZE\r\n    )\r\n    .test(\r\n      'fileFormat',\r\n      'Unsupported format',\r\n      value => !value || SUPPORTED_FORMATS.includes(value.type)\r\n    ),\r\n  username: yup\r\n    .string()\r\n    .trim()\r\n    .required('This field is required')\r\n    .min(6, 'This field min 6 characters')\r\n    .max(15, 'This field max 15 characters')\r\n});\r\n\r\nconst SettingsProfileTab = ({ currentUser, updateUser }) => {\r\n  const { displayName } = currentUser || {};\r\n\r\n  const handleSubmit = async (data, actions) => {\r\n    const { setSubmitting, setFieldError } = actions;\r\n    const { photo, username } = data;\r\n\r\n    if (!photo && displayName === username) {\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const error = await updateUser(data);\r\n      if (error) {\r\n        const [name, msg] = error.split('-');\r\n        setFieldError(name, msg);\r\n      } else {\r\n        toast.dark(' Update profile successfully!', {\r\n          position: toast.POSITION.TOP_RIGHT\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error.code);\r\n      console.error(error.message);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"form\">\r\n        <h2 className=\"heading-1\">MY PROFILE</h2>\r\n        <Formik\r\n          initialValues={(initialValues, { username: displayName || '' })}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {({ isSubmitting, errors, touched, setFieldValue }) => (\r\n            <Form className=\"form__form\">\r\n              <Field\r\n                name=\"photo\"\r\n                component={CustomImageInput}\r\n                setFieldValue={setFieldValue}\r\n                errorMessage={errors['photo'] ? errors['photo'] : undefined}\r\n                touched={touched['photo']}\r\n              />\r\n              <CustomTextField\r\n                type=\"text\"\r\n                name=\"username\"\r\n                className=\"form__input\"\r\n                placeholder=\"Username\"\r\n              />\r\n              <button\r\n                type={isSubmitting ? 'button' : 'submit'}\r\n                className=\"btn form__submit\"\r\n              >\r\n                {isSubmitting && (\r\n                  <AiOutlineLoading className=\"icon icon--loading\" />\r\n                )}\r\n                SAVE CHANGES\r\n              </button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nSettingsProfileTab.propTypes = propTypes;\r\nSettingsProfileTab.defaultProps = defaultProps;\r\n\r\nexport default SettingsProfileTab;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Formik, Form } from 'formik';\r\nimport * as yup from 'yup';\r\nimport CustomTextField from './CustomTextField';\r\nimport { AiOutlineLoading } from 'react-icons/ai';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst propTypes = {\r\n  currentUser: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst initialValues = {\r\n  oldPassword: '',\r\n  newPassword: '',\r\n  confirmNewPassword: '',\r\n  error: ''\r\n};\r\n\r\nconst validationSchema = yup.object({\r\n  oldPassword: yup.string().required('This field is required'),\r\n  newPassword: yup\r\n    .string()\r\n    .required('This field is required')\r\n    .min(6, 'This field min 6 characters'),\r\n  confirmNewPassword: yup\r\n    .string()\r\n    .required('This field is required')\r\n    .when('newPassword', {\r\n      is: val => (val && val.length > 0 ? true : false),\r\n      then: yup\r\n        .string()\r\n        .oneOf([yup.ref('newPassword')], 'Both password need to be the same')\r\n    })\r\n});\r\n\r\nconst SettingsPasswordTab = ({ changePassword }) => {\r\n  const handleSubmit = async (data, actions) => {\r\n    const { setSubmitting, setFieldError, resetForm } = actions;\r\n    const { oldPassword, newPassword } = data;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const error = await changePassword(oldPassword, newPassword);\r\n\r\n      if (error) {\r\n        const [name, msg] = error.split('-');\r\n        setFieldError(name, msg);\r\n      } else {\r\n        resetForm();\r\n        toast.dark(' Change password successfully!', {\r\n          position: toast.POSITION.TOP_RIGHT\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error.code);\r\n      console.error(error.message);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"form\">\r\n        <h2 className=\"heading-1\">CHANGE MY PASSWORD</h2>\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {({ isSubmitting, errors }) => (\r\n            <Form className=\"form__form\">\r\n              <CustomTextField\r\n                type=\"password\"\r\n                name=\"oldPassword\"\r\n                className=\"form__input\"\r\n                placeholder=\"Old password\"\r\n              />\r\n              <CustomTextField\r\n                type=\"password\"\r\n                name=\"newPassword\"\r\n                className=\"form__input\"\r\n                placeholder=\"New Password\"\r\n              />\r\n              <CustomTextField\r\n                type=\"password\"\r\n                name=\"confirmNewPassword\"\r\n                className=\"form__input\"\r\n                placeholder=\"New password confirmation\"\r\n              />\r\n              {errors['error'] && (\r\n                <span\r\n                  style={{\r\n                    fontSize: '1.4rem',\r\n                    fontWeight: '100',\r\n                    color: '#f00'\r\n                  }}\r\n                >\r\n                  {errors['error']}\r\n                </span>\r\n              )}\r\n              <button\r\n                type={isSubmitting ? 'button' : 'submit'}\r\n                className=\"btn form__submit\"\r\n              >\r\n                {isSubmitting && (\r\n                  <AiOutlineLoading className=\"icon icon--loading\" />\r\n                )}\r\n                SAVE CHANGES\r\n              </button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nSettingsPasswordTab.propTypes = propTypes;\r\nSettingsPasswordTab.defaultProps = defaultProps;\r\n\r\nexport default SettingsPasswordTab;\r\n","import React, { useState, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport withAuthenticated from './HOCs/withAuthenticated';\r\nimport SettingsProfileTab from './SettingsProfileTab';\r\nimport SettingsPasswordTab from './SettingsPasswordTab';\r\nimport { SETTINGS_TABS } from '../constants/GlobalConstants';\r\n\r\nconst propTypes = {\r\n  currentUser: PropTypes.object\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst UserSettings = ({ currentUser, updateUser, changePassword }) => {\r\n  const [currentTab, setCurrentTab] = useState('');\r\n\r\n  const renderTab = useMemo(() => {\r\n    switch (currentTab) {\r\n      case '':\r\n        return (\r\n          <SettingsProfileTab\r\n            currentUser={currentUser}\r\n            updateUser={updateUser}\r\n          />\r\n        );\r\n      case 'change-password':\r\n        return <SettingsPasswordTab changePassword={changePassword} />;\r\n      default:\r\n        return null;\r\n    }\r\n  }, [currentTab, currentUser, updateUser, changePassword]);\r\n\r\n  const handleChangeTab = tab => () => {\r\n    setCurrentTab(tab);\r\n  };\r\n\r\n  return (\r\n    <div className=\"settings\">\r\n      <div className=\"settings__tabs\">\r\n        {SETTINGS_TABS.map(({ key, label }) => (\r\n          <span\r\n            onClick={handleChangeTab(key)}\r\n            className={`settings__tab ${\r\n              currentTab === key ? 'settings__tab--active' : ''\r\n            }`}\r\n            key={key}\r\n          >\r\n            {label}\r\n          </span>\r\n        ))}\r\n      </div>\r\n      <div className=\"settings__content\">{renderTab}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nUserSettings.propTypes = propTypes;\r\nUserSettings.defaultProps = defaultProps;\r\n\r\nexport default withAuthenticated(UserSettings);\r\n","import app from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firebase-firestore';\r\nimport 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: 'AIzaSyAb531xDPpt8fMbqnrHRTn521bxx7rTezk',\r\n  authDomain: 'rawg-client.firebaseapp.com',\r\n  databaseURL: 'https://rawg-client.firebaseio.com',\r\n  projectId: 'rawg-client',\r\n  storageBucket: 'rawg-client.appspot.com',\r\n  messagingSenderId: '350468735304',\r\n  appId: '1:350468735304:web:d51ff41d2f0d0b5196f37d',\r\n  measurementId: 'G-PGYDM791MF'\r\n};\r\n\r\nclass Firebase {\r\n  constructor() {\r\n    app.initializeApp(firebaseConfig);\r\n    this.EmailAuthProvider = app.auth.EmailAuthProvider;\r\n    this.auth = app.auth();\r\n    this.db = app.firestore();\r\n    this.storage = app.storage();\r\n  }\r\n}\r\n\r\nexport default new Firebase();\r\n","import firebase from '../firebase';\r\nimport {\r\n  LOGIN_SUCCESS,\r\n  CLEAR_USER,\r\n  UPDATE_USER_USERNAME,\r\n  FETCH_USER_LIKES_SUCCESS,\r\n  TOGGLE_LIKE,\r\n  FETCH_VISITED_USER_SUCCESS,\r\n  FETCH_VISITED_USER_REQUEST,\r\n  UPDATE_USER_PROFILE_SUCCESS\r\n} from '../constants/ActionTypes';\r\n\r\nconst loginSuccess = user => ({ type: LOGIN_SUCCESS, payload: { user } });\r\n\r\nconst clearUser = () => ({ type: CLEAR_USER });\r\n\r\nconst updateUsername = username => ({\r\n  type: UPDATE_USER_USERNAME,\r\n  payload: { username }\r\n});\r\n\r\nconst fetchUserLikesSuccess = likes => ({\r\n  type: FETCH_USER_LIKES_SUCCESS,\r\n  payload: { likes }\r\n});\r\n\r\nconst userToggleLike = (id, liked) => ({\r\n  type: TOGGLE_LIKE,\r\n  payload: { id, liked }\r\n});\r\n\r\nconst fetchVisitedUserRequest = () => ({ type: FETCH_VISITED_USER_REQUEST });\r\n\r\nconst fetchVisitedUserSuccess = user => ({\r\n  type: FETCH_VISITED_USER_SUCCESS,\r\n  payload: { user }\r\n});\r\n\r\nconst updateUserProfileSuccess = props => ({\r\n  type: UPDATE_USER_PROFILE_SUCCESS,\r\n  payload: { props }\r\n});\r\n\r\nexport const login = async (email, password) => {\r\n  return firebase.auth.signInWithEmailAndPassword(email, password);\r\n};\r\n\r\nexport const signUp = (email, username, password) => async dispatch => {\r\n  //email existed\r\n  const emailExisted = await firebase.auth.fetchSignInMethodsForEmail(email);\r\n  if (emailExisted && emailExisted.length > 0) {\r\n    return 'email-The email address is already in use by another account.';\r\n  }\r\n\r\n  //username existed\r\n  const usernameExisted = await firebase.db\r\n    .collection('users')\r\n    .doc(username)\r\n    .get();\r\n  if (usernameExisted.data()) {\r\n    return 'username-The username is already in use by another account.';\r\n  }\r\n\r\n  //create user\r\n  const res = await firebase.auth.createUserWithEmailAndPassword(\r\n    email,\r\n    password\r\n  );\r\n  await res.user\r\n    .updateProfile({\r\n      displayName: username\r\n    })\r\n    .then(() => {\r\n      dispatch(updateUsername(res.user.displayName));\r\n      firebase.db\r\n        .collection('users')\r\n        .doc(res.user.displayName)\r\n        .set({\r\n          uid: res.user.uid,\r\n          displayName: res.user.displayName,\r\n          photoURL: null\r\n        })\r\n        .catch(console.error);\r\n    });\r\n};\r\n\r\nexport const logOut = async () => {\r\n  return firebase.auth.signOut();\r\n};\r\n\r\n//observe current user state change\r\nexport const authen = () => dispatch => {\r\n  return firebase.auth.onAuthStateChanged(user => {\r\n    if (user) {\r\n      const fetchedUser = {\r\n        uid: user.uid,\r\n        photoURL: user.photoURL,\r\n        displayName: user.displayName\r\n      };\r\n      dispatch(loginSuccess(fetchedUser));\r\n      fetchUserLikes(fetchedUser.uid)\r\n        .then(res => dispatch(fetchUserLikesSuccess(res.data())))\r\n        .catch(console.error);\r\n    } else {\r\n      dispatch(clearUser());\r\n    }\r\n  });\r\n};\r\n\r\nexport const fetchUserLikes = uid => {\r\n  return firebase.db.collection('likes').doc(uid).get();\r\n};\r\n\r\nexport const toggleLike = (id, game, callback) => async dispatch => {\r\n  const { currentUser } = firebase.auth;\r\n\r\n  if (currentUser) {\r\n    const { uid } = currentUser;\r\n    const docRef = firebase.db.collection('likes').doc(uid);\r\n\r\n    docRef\r\n      .set({ [id]: game }, { merge: true })\r\n      .then(() => {\r\n        dispatch(userToggleLike(id, game));\r\n      })\r\n      .catch(console.error)\r\n      .finally(() => {\r\n        callback(false);\r\n      });\r\n  }\r\n};\r\n\r\nexport const fetchUser = username => async dispatch => {\r\n  try {\r\n    dispatch(fetchVisitedUserRequest());\r\n    const fetchedUser = await firebase.db\r\n      .collection('users')\r\n      .doc(username)\r\n      .get();\r\n    dispatch(fetchVisitedUserSuccess(fetchedUser.data()));\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nexport const updateUser = user => async dispatch => {\r\n  const { currentUser } = firebase.auth;\r\n\r\n  if (!currentUser) {\r\n    return;\r\n  }\r\n\r\n  const storageRef = firebase.storage.ref();\r\n  const { photo, username } = user;\r\n  const { uid, displayName } = currentUser;\r\n  let propsShouldUpdate = { displayName: username };\r\n\r\n  try {\r\n    //username existed\r\n    if (displayName !== username) {\r\n      const usernameExisted = await firebase.db\r\n        .collection('users')\r\n        .doc(username)\r\n        .get();\r\n      if (usernameExisted.data()) {\r\n        return 'username-The username is already in use by another account.';\r\n      }\r\n    }\r\n\r\n    if (photo) {\r\n      //upload image to storage\r\n      await storageRef.child(uid).put(photo);\r\n      //get image url\r\n      const url = await storageRef.child(uid).getDownloadURL();\r\n\r\n      propsShouldUpdate = { ...propsShouldUpdate, photoURL: url };\r\n    }\r\n\r\n    //update auth profile\r\n    currentUser.updateProfile({\r\n      ...propsShouldUpdate\r\n    });\r\n\r\n    const collectRef = firebase.db.collection('users').doc(displayName);\r\n    if (displayName === username) {\r\n      //update only\r\n      collectRef.update({\r\n        ...propsShouldUpdate\r\n      });\r\n    } else {\r\n      //delete current user and add new user with new key\r\n      const previousUser = await collectRef.get();\r\n\r\n      collectRef.delete();\r\n\r\n      firebase.db\r\n        .collection('users')\r\n        .doc(username)\r\n        .set({\r\n          ...previousUser.data(),\r\n          ...propsShouldUpdate\r\n        });\r\n    }\r\n\r\n    //update reducer\r\n    dispatch(updateUserProfileSuccess(propsShouldUpdate));\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const changePassword = (oldPassword, newPassword) => async () => {\r\n  const { currentUser } = firebase.auth;\r\n  if (!currentUser) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const { email } = currentUser;\r\n    const credential = firebase.EmailAuthProvider.credential(\r\n      email,\r\n      oldPassword\r\n    );\r\n    const res = await currentUser.reauthenticateWithCredential(credential);\r\n\r\n    if (res) {\r\n      await currentUser.updatePassword(newPassword);\r\n    }\r\n  } catch (err) {\r\n    if (err.code === 'auth/wrong-password') {\r\n      return 'oldPassword-Wrong password';\r\n    }\r\n    return 'error-Something went wrong';\r\n  }\r\n};\r\n","import { CHANGE_ROUTE } from '../constants/ActionTypes';\r\nimport { parseRoute } from '../utils/RouterUtils';\r\n\r\nexport const changeRoute = route => ({\r\n  type: CHANGE_ROUTE,\r\n  payload: { route }\r\n});\r\n\r\nexport const initRouter = paths => dispatch => {\r\n  // window.onpopstate = () => {\r\n  //   const { pathname, search } = window.location;\r\n  //   const route = parseRoute(paths, pathname, search);\r\n  //   dispatch(changeRoute(route));\r\n  // };\r\n\r\n  const hash = window.location.hash ? window.location.hash.slice(1) : '';\r\n  const [pathname, search] = hash.split('?');\r\n  const route = parseRoute(paths, pathname, search);\r\n  dispatch(changeRoute(route));\r\n};\r\n","import { pathToRegexp, compile } from 'path-to-regexp';\r\n\r\nconst compileOptions = options => {\r\n  return Object.keys(options)\r\n    .map(key => `${key}=${options[key]}`)\r\n    .join('&');\r\n};\r\n\r\nconst getPathMatch = (paths, pathname) => {\r\n  return paths\r\n    .map(path => {\r\n      const keys = [];\r\n      const regexp = pathToRegexp(path, keys);\r\n      return { path, regexp, keys };\r\n    })\r\n    .find(path => path.regexp.test(pathname));\r\n};\r\n\r\nconst parseRouteKeys = (pathname, result) => {\r\n  const { keys, regexp } = result;\r\n  const regexpResult = regexp.exec(pathname);\r\n\r\n  return keys.reduce(\r\n    (obj, key, i) => ({\r\n      ...obj,\r\n      [key.name]: i + 1 < regexpResult.length ? regexpResult[i + 1] : ''\r\n    }),\r\n    {}\r\n  );\r\n};\r\n\r\nconst parseRouteOptions = search => {\r\n  return search\r\n    .split('&')\r\n    .map(pair => pair.split('='))\r\n    .filter(keyValuePair => keyValuePair.length === 2 && keyValuePair[0] !== '')\r\n    .reduce(\r\n      (obj, keyValuePair) => ({ ...obj, [keyValuePair[0]]: keyValuePair[1] }),\r\n      {}\r\n    );\r\n};\r\n\r\nexport const parseRoute = (paths, pathname, search) => {\r\n  const pathMatch = getPathMatch(paths, pathname);\r\n  const path = pathMatch ? pathMatch.path : pathname;\r\n  const keys = pathMatch ? parseRouteKeys(pathname, pathMatch) : [];\r\n  const options = search ? parseRouteOptions(search) : {};\r\n\r\n  return { path, keys, options };\r\n};\r\n\r\nexport const compileRoute = ({ path, keys, options }) => {\r\n  const toPath = compile(path, { encode: encodeURIComponent });\r\n  const query = compileOptions(options);\r\n  return `${toPath(keys)}${query.trim() !== '' ? `?${query}` : ''}`;\r\n};\r\n","export const API_URL = 'https://api.rawg.io/api';\r\nexport const IMAGE_URL = 'https://media.rawg.io/media/';\r\nexport const SMALL_IMAGE_URL = 'https://media.rawg.io/media/resize/200/-/';\r\nexport const MEDIUM_IMAGE_URL = 'https://media.rawg.io/media/resize/640/-/';\r\nexport const LARGE_IMAGE_URL = 'https://media.rawg.io/media/resize/1280/-/';\r\nexport const LIGHTWEIGHT_IMAGE_URL = {\r\n  VIDEO: 'https://media.rawg.io/media/crop/600/400/',\r\n  NO_VIDEO: 'https://media.rawg.io/media/resize/640/-/'\r\n};\r\n\r\nexport const INDEX_PATH = '/';\r\nexport const GAMES_PATH = '/games';\r\nexport const GAME_PATH = '/games/:slug';\r\nexport const USER_PATH = '/@:username';\r\n","export const GENRES = [\r\n  {\r\n    key: 'action',\r\n    label: 'Action',\r\n    to: 'action'\r\n  },\r\n  {\r\n    key: 'indie',\r\n    label: 'Indie',\r\n    to: 'indie'\r\n  },\r\n  {\r\n    key: 'adventure',\r\n    label: 'Adventure',\r\n    to: 'adventure'\r\n  },\r\n  {\r\n    key: 'role-playing-games-rpg',\r\n    label: 'RPG',\r\n    to: 'role-playing-games-rpg'\r\n  },\r\n  {\r\n    key: 'shooter',\r\n    label: 'Shooter',\r\n    to: 'shooter'\r\n  },\r\n  {\r\n    key: 'strategy',\r\n    label: 'Strategy',\r\n    to: 'strategy'\r\n  },\r\n  {\r\n    key: 'casual',\r\n    label: 'Casual',\r\n    to: 'casual'\r\n  },\r\n  {\r\n    key: 'simulation',\r\n    label: 'Simulation',\r\n    to: 'simulation'\r\n  },\r\n  {\r\n    key: 'arcade',\r\n    label: 'Arcade',\r\n    to: 'arcade'\r\n  },\r\n  {\r\n    key: 'puzzle',\r\n    label: 'Puzzle',\r\n    to: 'puzzle'\r\n  },\r\n  {\r\n    key: 'platformer',\r\n    label: 'Platformer',\r\n    to: 'platformer'\r\n  },\r\n  {\r\n    key: 'racing',\r\n    label: 'Racing',\r\n    to: 'racing'\r\n  },\r\n  {\r\n    key: 'sports',\r\n    label: 'Sports',\r\n    to: 'sports'\r\n  },\r\n  {\r\n    key: 'family',\r\n    label: 'Family',\r\n    to: 'family'\r\n  },\r\n  {\r\n    key: 'massively-multiplayer',\r\n    label: 'Massively Multiplayer',\r\n    to: 'massively-multiplayer'\r\n  },\r\n  {\r\n    key: 'fighting',\r\n    label: 'Fighting',\r\n    to: 'fighting'\r\n  },\r\n  {\r\n    key: 'board-games',\r\n    label: 'Board Games',\r\n    to: 'board-games'\r\n  },\r\n  {\r\n    key: 'educational',\r\n    label: 'Educational',\r\n    to: 'educational'\r\n  },\r\n  {\r\n    key: 'card',\r\n    label: 'Card',\r\n    to: 'card'\r\n  }\r\n];\r\n\r\nexport const WINDOW_SIZE = {\r\n  tablet: 768,\r\n  laptop: 992,\r\n  desktop: 1200,\r\n  all: 0\r\n};\r\n\r\nexport const WINDOW_RESIZE_DEBOUNCE = 400;\r\n\r\nexport const USER_TABS = [\r\n  {\r\n    key: '',\r\n    label: 'Overview'\r\n  },\r\n  {\r\n    key: 'likes',\r\n    label: 'Likes'\r\n  }\r\n];\r\n\r\nexport const SETTINGS_TABS = [\r\n  {\r\n    key: '',\r\n    label: 'Profile'\r\n  },\r\n  {\r\n    key: 'change-password',\r\n    label: 'Change password'\r\n  }\r\n];\r\n\r\nexport const FILE_SIZE = 160 * 1024;\r\nexport const SUPPORTED_FORMATS = ['image/jpg', 'image/jpeg', 'image/png'];\r\n","import {\r\n  PLAY_FULL_VIDEO,\r\n  CLOSE_FULL_VIDEO,\r\n  WINDOW_RESIZE\r\n} from '../constants/ActionTypes';\r\n\r\nexport const playFullVideo = videoId => ({\r\n  type: PLAY_FULL_VIDEO,\r\n  payload: { videoId }\r\n});\r\n\r\nexport const closeFullVideo = () => ({\r\n  type: CLOSE_FULL_VIDEO\r\n});\r\n\r\nexport const windowResize = size => ({\r\n  type: WINDOW_RESIZE,\r\n  payload: { size }\r\n});\r\n","// GAMES\r\nexport const getGames = state => state.games;\r\n\r\n// ROUTER\r\nexport const getGenre = state => {\r\n  const { query, tag, genre } = state.router.route.options;\r\n  return query || tag ? '' : genre || 'action';\r\n};\r\n\r\nexport const getSearch = state => state.router.route.options.query;\r\n\r\nexport const getSlug = state => state.router.route.keys.slug || '';\r\n\r\nexport const getTag = state => {\r\n  return state.router.route.options.tag;\r\n};\r\n\r\nexport const getUsername = state => state.router.route.keys.username;\r\n\r\n// APP\r\nexport const getWindowSize = state => state.app.windowSize;\r\n\r\n// USER\r\nexport const getUser = state => state.user;\r\n\r\nexport const getLikes = state => state.user.likes;\r\n\r\nexport const getIsAuthenticated = state => !!state.user.currentUser;\r\n\r\n// USER PROFILE\r\nexport const getUserProfile = state => state.profile;\r\n"],"sourceRoot":""}